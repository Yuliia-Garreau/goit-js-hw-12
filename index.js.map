{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/img/error.png","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport const fetchImages = async (search, page=1) => {\n    const url = `https://pixabay.com/api/`;\nconst results = await axios.get(url, {\n    params: {\n        key: \"47281419-922d6d2c66ee391f8ff42b6d3\", \n        q: search,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        page: page,\n        per_page: 15,\n    }\n});\n    return results;\n}","\nexport const renderImages = (images) => {\n    return images\n  .map(\n    image => `\n      <li class=\"item-gallery\">\n      <a class=\"link-gallery\" href=\"${image.largeImageURL}\">\n        <img  \n        src=\"${image.webformatURL}\"\n        class=\"img-gallery\"\n           \n          alt=\"${image.tags}\"\n          title=\"\"\n        />\n      \n        <ul class=\"list-info\">\n          \n        <li class=\"list-item-info\">\n            <p class=\"info-title\">Likes</p>\n            <p class=\"info-value\">${image.likes}</p>\n        </li>\n\n          <li class=\"list-item-info\">\n            <p class=\"info-title\">Views</p>\n            <p class=\"info-value\">${image.views}</p>\n          </li>\n\n          <li class=\"list-item-info\">\n            <p class=\"info-title\">Comments</p>\n            <p class=\"info-value\">${image.comments}</p>\n          </li>\n\n          <li class=\"list-item-info\">\n            <p class=\"info-title\">Downloads</p>\n            <p class=\"info-value\">${image.downloads}</p>\n          </li>\n\n        </ul>\n        </a>\n      </li>\n    \n  `)\n.join(\"\");\n}\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAETSURBVHgBrVVbDoJADCwEwq83kaN4I+UkHgGP4mH4YTGslFBB2e0UYZImG9rO7KMtRBG0bXd1rvMW49gYTxYjTxK6eU+PNKUnKeh7Kjl2yKGiyCtCmHf+upMRHItO8je5WWQPORQ5gjwqopE7586YcB3zJTIt6kBiiR5ONtc0TRnw1ewbBbouTMLfYyJCjnJVgZgIIl/mZQSQ53k1BPNybCYGNxYb+1A+FPgVEQELOSMlI4aREFwjmE4gs4lt+mSePVBgSS7XsnwTKKJVg1YtWgkv/bDRLKWoNpoEDYShUVESQChGRsVnc5rIVqzIBUeIRMmPEIHke0Q08lUfyFjwPuE6P1l++kT+smV8jJhPgk27ljfw3ToafivEMQAAAABJRU5ErkJggg==\"","\nimport { fetchImages } from './js/pixabay-api';\nimport { renderImages } from './js/render-functions';\nimport error from \"./img/error.png\"\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\niziToast.settings({\n  timeout: 1000,\n  position: 'topRight',\n});\n\nconst galleryLargeImage = new SimpleLightbox('.item-gallery a', {\n    captionsData: 'alt',\n    captionDelay: 300,\n    className: 'bg-color',\n  });\n\nconst form = document.querySelector('.form-search');\nconst gallery = document.querySelector('.gallery-list');\nconst loader = document.querySelector(\".loader\");\nconst loadMore = document.querySelector(\".load-more\");\nloader.style.display = 'none';\nloadMore.style.display = 'none';\n\nlet page = 1;\nlet perPage = 100;\n\n\nform.addEventListener('submit', handleSubmit);\n\nfunction handleSubmit(event) {\n    event.preventDefault();\n    let inputValue = event.target.elements.input.value.trim();\n    \n    if (inputValue === '') {\n      loader.style.display = 'none';\n      loadMore.style.display = 'none';\n      gallery.innerHTML = '';\n      iziToast.warning({\n        title: 'Caution',\n        iconUrl: error,\n        message: 'The field is empty, please type your request',\n    });    \n    return ;\n    }\n    if (inputValue) {\n    loader.style.display = 'block';\n    }\n    \n    fetchImages(inputValue)\n    .then((results) => {\n        if(results.data.totalHits === 0){\n        loadMore.style.display = 'none';\n        loader.style.display = 'none';\n        iziToast.error ({\n        iconUrl: error,\n        titleColor: '#fff',\n        messageColor: '#fff',\n        imageWidth: 24,\n        iconColor: '#fff',\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n    })\n    } else {\n    gallery.innerHTML = renderImages(results.data.hits);\n    loader.style.display = 'none';\n    galleryLargeImage.refresh();\n    loadMore.style.display = 'block';\n    const totalPages = results.data.totalHits / perPage;\n\n    loadMore.addEventListener(\"click\", handleLoadMore)\n        async function handleLoadMore() {\n        results.config.params.page += 1;    \n        loader.style.display = 'block';\n        try {\n        const {data} = await fetchImages(inputValue, results.config.params.page);\n        gallery.insertAdjacentHTML(\"beforeend\", renderImages(data.hits));   \n        loader.style.display = 'none'; \n\n        const photo = document.querySelector(\".item-gallery\");\n            const itemHeight = photo.getBoundingClientRect().height;\n            window.scrollBy({\n                left: 0,\n                top: itemHeight * 2,\n                behavior: \"smooth\"\n            });\n\n        if(results.config.params.page >= totalPages) {\n            loadMore.style.display = 'none';\n\n                const timerId = setTimeout(() => {\n                    iziToast.info({\n                        position: \"topRight\",  \n                        iconUrl: error,      \n                        message: \"We're sorry, there are no more images to load\"\n                        });\n                }, 3000);\n        }\n                }\n        catch(error) {\n            console.log(error.message)\n        };\n        }\n    }\n    })\n    .catch((error) => {\n    console.log(error.message);            \n    }\n    )\n    .finally(() => {\n    event.target.elements.input.value = \"\";\n    })\n    }  \n\n"],"names":["fetchImages","search","page","axios","renderImages","images","image","error","iziToast","galleryLargeImage","SimpleLightbox","form","gallery","loader","loadMore","perPage","handleSubmit","event","inputValue","results","totalPages","handleLoadMore","data","itemHeight","timerId"],"mappings":"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"}